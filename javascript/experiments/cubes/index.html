<!DOCTYPE html>
<html>
	<head>
	</head>	
	<body>
		<canvas id="worldCanvas" width="1200" height="800"></canvas>
		<script>

			// Classes
			
			class Cube {
			
				constructor(x, y, size, color, lineColor) {
					this.x = x;
					this.y = y;
					this.size = size;
					this.color = color;
					this.lineColor = lineColor;
				}
				
				draw(context) {
					console.log('Flag');
					context.beginPath();
					context.rect(this.x, this.y, this.size, this.size);
					context.fillStyle = this.color;
					context.fill();
					context.lineWidth = 1;
					context.strokeStyle = this.lineColor;
					context.stroke();
					context.beginPath();
					context.moveTo(this.x, this.y);
					context.lineTo(this.x + this.size / 2, this.y - this.size / 2);
					context.lineTo(this.x + this.size / 2 + this.size, this.y - this.size / 2);
					context.lineTo(this.x + this.size, this.y);
					context.lineTo(this.x, this.y);
					context.fill();
					context.fillStyle = this.color;
					context.fill();
					context.lineWidth = 1;
					context.strokeStyle = this.lineColor;
					context.stroke();
					context.beginPath();
					context.moveTo(this.x + this.size, this.y);
					context.lineTo(this.x + this.size / 2 + this.size, this.y - this.size / 2);
					context.lineTo(this.x + this.size / 2 + this.size, this.y + this.size / 2);
					context.lineTo(this.x + this.size, this.y + this.size);
					context.lineTo(this.x + this.size, this.y);
					context.fill();
					context.fillStyle = this.color;
					context.fill();
					context.lineWidth = 1;
					context.strokeStyle = this.lineColor;
					context.stroke();
				}
			}
			
			// Constants
			
			const X_SIZE = 1200;
			const Y_SIZE = 800;
			const X_SQUARE_NUMBER = 20;
			const Y_SQUARE_NUMBER = 20;
			const X_SQUARE_SIZE = X_SIZE / X_SQUARE_NUMBER;
			const Y_SQUARE_SIZE = Y_SIZE / Y_SQUARE_NUMBER;
			const TIMEOUT = 20;
			
			const CUBE_SIZE = 30;
			const CUBE_FILL_COLOR = 'Lawngreen'
			const CUBE_LINE_COLOR = 'Magenta'
			const CUBE = new Cube(10 * CUBE_SIZE, 5 * CUBE_SIZE, CUBE_SIZE, 'Red', 'Blue');
			
			var cubes = [];
			
			// Method execution:
			
			initialize();
			play();
			
			// Method declaration
			
			function initialize() {
				var canvas = document.getElementById('worldCanvas');
				var context = canvas.getContext('2d');
				for(var i = 0; i < 20; i++) {
					for(var j = 0; j < 20; j++) {
						var cube = new Cube(20 * CUBE_SIZE / 2 + j * CUBE_SIZE - i * CUBE_SIZE / 2, i * CUBE_SIZE / 2, CUBE_SIZE, 'Lawngreen', 'Magenta');
						cubes.push(cube);
					}
				}
				
				for(var i = 0; i < cubes.length; i++) {
					cubes[i].draw(context);
				}
				
				CUBE.draw(context);
				drawBackground(context);
			};
			
			function randomColor() {
				var randomRed = Math.random() * 255;
				var randomGreen = Math.random() * 255;
				var randomBlue = Math.random() * 255;
				return "rgb(" + randomRed + ", " + randomGreen + ", " + randomBlue + ")";
				// return 'red';
			};
			
			function play() {
				draw();
				move();
				setTimeout(play, TIMEOUT);
			};
			
			function sleep(ms) {
				return new Promise(resolve => setTimeout(resolve, ms));
			};
			
			function draw() {
				var canvas = document.getElementById('worldCanvas');
				var context = canvas.getContext('2d');
			};
			
			function drawRectangle(context, color, x, y, xSize, ySize) {
				context.beginPath();
				context.rect(x, y, xSize, ySize);
				context.fillStyle = color;
				context.fill();
				context.lineWidth = 1;
				context.strokeStyle = color;
				context.stroke();
			}
			
			function drawBackground(context) {
				// drawRectangle(context, 'black', 0, 0, X_SIZE, Y_SIZE);
			};
			
			function move() {
			};
			
		</script>
	</body>
</html>